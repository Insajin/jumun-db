"-- ============================================================================\n-- Make staff.user_id nullable (for development/testing)\n-- ============================================================================\n\nALTER TABLE staff\nALTER COLUMN user_id DROP NOT NULL;\n\nCOMMENT ON COLUMN staff.user_id IS 'Optional reference to auth.users. NULL for test data. Update with real auth.users ID in production.';\n\n-- ============================================================================\n-- BRANDS\n-- ============================================================================\n\nINSERT INTO brands (id, name, slug) VALUES\n  ('11111111-1111-1111-1111-111111111111', 'Coffee & Co', 'coffee-and-co'),\n  ('22222222-2222-2222-2222-222222222222', 'Burger House', 'burger-house');\n\n-- ============================================================================\n-- SUBSCRIPTIONS\n-- ============================================================================\n\nINSERT INTO subscriptions (brand_id, plan, status, trial_ends_at, expires_at) VALUES\n  ('11111111-1111-1111-1111-111111111111', 'professional', 'active', NULL, NOW() + INTERVAL '1 year'),\n  ('22222222-2222-2222-2222-222222222222', 'trial', 'active', NOW() + INTERVAL '30 days', NOW() + INTERVAL '1 year');\n\n-- ============================================================================\n-- STORES\n-- ============================================================================\n\nINSERT INTO stores (id, brand_id, name, slug, address, lat, lng, timezone, phone, status, accepting_orders, operating_hours) VALUES\n \n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', '11111111-1111-1111-1111-111111111111', 'Coffee & Co Gangnam', 'gangnam', '서울시 강남구 테헤란로 123', 37.4979, 127.0276, 'Asia/Seoul', '02-1234-5678', 'active', TRUE,\n   '{\"monday\": {\"open\": \"08:00\", \"close\": \"22:00\"}, \"tuesday\": {\"open\": \"08:00\", \"close\": \"22:00\"}, \"wednesday\": {\"open\": \"08:00\", \"close\": \"22:00\"}, \"thursday\": {\"open\": \"08:00\", \"close\": \"22:00\"}, \"friday\": {\"open\": \"08:00\", \"close\": \"23:00\"}, \"saturday\": {\"open\": \"09:00\", \"close\": \"23:00\"}, \"sunday\": {\"open\": \"09:00\", \"close\": \"21:00\"}}'::jsonb),\n\n  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', '11111111-1111-1111-1111-111111111111', 'Coffee & Co Hongdae', 'hongdae', '서울시 마포구 홍익로 456', 37.5563, 126.9241, 'Asia/Seoul', '02-2345-6789', 'active', TRUE,\n   '{\"monday\": {\"open\": \"08:00\", \"close\": \"22:00\"}, \"tuesday\": {\"open\": \"08:00\", \"close\": \"22:00\"}, \"wednesday\": {\"open\": \"08:00\", \"close\": \"22:00\"}, \"thursday\": {\"open\": \"08:00\", \"close\": \"22:00\"}, \"friday\": {\"open\": \"08:00\", \"close\": \"24:00\"}, \"saturday\": {\"open\": \"09:00\", \"close\": \"24:00\"}, \"sunday\": {\"open\": \"09:00\", \"close\": \"22:00\"}}'::jsonb),\n\n \n  ('cccccccc-cccc-cccc-cccc-cccccccccccc', '22222222-2222-2222-2222-222222222222', 'Burger House Itaewon', 'itaewon', '서울시 용산구 이태원로 789', 37.5340, 126.9946, 'Asia/Seoul', '02-3456-7890', 'active', TRUE,\n   '{\"monday\": {\"open\": \"11:00\", \"close\": \"23:00\"}, \"tuesday\": {\"open\": \"11:00\", \"close\": \"23:00\"}, \"wednesday\": {\"open\": \"11:00\", \"close\": \"23:00\"}, \"thursday\": {\"open\": \"11:00\", \"close\": \"23:00\"}, \"friday\": {\"open\": \"11:00\", \"close\": \"24:00\"}, \"saturday\": {\"open\": \"11:00\", \"close\": \"24:00\"}, \"sunday\": {\"open\": \"11:00\", \"close\": \"23:00\"}}'::jsonb);\n\n-- ============================================================================\n-- STAFF (user_id set to NULL - update after creating auth users)\n-- ============================================================================\n\nINSERT INTO staff (store_id, user_id, role, permissions) VALUES\n \n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', NULL, 'store_manager', '{\"can_manage_inventory\": true, \"can_refund\": true, \"can_manage_staff\": true}'::jsonb),\n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', NULL, 'store_staff', '{\"can_manage_inventory\": true, \"can_refund\": false}'::jsonb),\n\n \n  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', NULL, 'store_manager', '{\"can_manage_inventory\": true, \"can_refund\": true, \"can_manage_staff\": true}'::jsonb),\n\n \n  ('cccccccc-cccc-cccc-cccc-cccccccccccc', NULL, 'store_manager', '{\"can_manage_inventory\": true, \"can_refund\": true, \"can_manage_staff\": true}'::jsonb);\n\n-- ============================================================================\n-- CUSTOMERS (user_id set to NULL - customers.user_id is already nullable)\n-- ============================================================================\n\nINSERT INTO customers (id, user_id, phone, phone_verified_at, loyalty_points, preferences, brand_id) VALUES\n  ('d1111111-1111-1111-1111-111111111111', NULL, '+821012345678', NOW(), 100, '{\"notifications\": {\"push\": true, \"sms\": true}, \"language\": \"ko\"}'::jsonb, '11111111-1111-1111-1111-111111111111'),\n  ('d2222222-2222-2222-2222-222222222222', NULL, '+821098765432', NOW(), 50, '{\"notifications\": {\"push\": true, \"sms\": false}, \"language\": \"ko\"}'::jsonb, '22222222-2222-2222-2222-222222222222');\n\n-- ============================================================================\n-- MENU CATEGORIES (Coffee & Co)\n-- ============================================================================\n\nINSERT INTO menu_categories (id, brand_id, store_id, parent_id, name, description, display_order, available) VALUES\n \n  ('e1111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NULL, NULL, 'Coffee', 'Hot and cold coffee drinks', 1, TRUE),\n  ('e2222222-2222-2222-2222-222222222222', '11111111-1111-1111-1111-111111111111', NULL, NULL, 'Non-Coffee', 'Tea, juice, and other beverages', 2, TRUE),\n  ('e3333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', NULL, NULL, 'Desserts', 'Cakes, cookies, and pastries', 3, TRUE),\n\n \n  ('e4444444-4444-4444-4444-444444444444', '11111111-1111-1111-1111-111111111111', NULL, 'e1111111-1111-1111-1111-111111111111', 'Espresso', 'Espresso-based drinks', 1, TRUE),\n  ('e5555555-5555-5555-5555-555555555555', '11111111-1111-1111-1111-111111111111', NULL, 'e1111111-1111-1111-1111-111111111111', 'Brewed', 'Drip and cold brew', 2, TRUE);\n\n-- ============================================================================\n-- MENU CATEGORIES (Burger House)\n-- ============================================================================\n\nINSERT INTO menu_categories (id, brand_id, store_id, parent_id, name, description, display_order, available) VALUES\n  ('f1111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', NULL, NULL, 'Burgers', 'Our signature burgers', 1, TRUE),\n  ('f2222222-2222-2222-2222-222222222222', '22222222-2222-2222-2222-222222222222', NULL, NULL, 'Sides', 'Fries, onion rings, and more', 2, TRUE),\n  ('f3333333-3333-3333-3333-333333333333', '22222222-2222-2222-2222-222222222222', NULL, NULL, 'Drinks', 'Soft drinks and shakes', 3, TRUE);\n\n-- ============================================================================\n-- MENU ITEMS (Coffee & Co)\n-- ============================================================================\n\nINSERT INTO menu_items (id, brand_id, store_id, category_id, name, description, price, available, inventory_tracked, display_order) VALUES\n \n  ('a1111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NULL, 'e4444444-4444-4444-4444-444444444444', 'Americano', 'Classic espresso with hot water', 4.50, TRUE, FALSE, 1),\n  ('a2222222-2222-2222-2222-222222222222', '11111111-1111-1111-1111-111111111111', NULL, 'e4444444-4444-4444-4444-444444444444', 'Latte', 'Espresso with steamed milk', 5.00, TRUE, FALSE, 2),\n  ('a3333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', NULL, 'e4444444-4444-4444-4444-444444444444', 'Cappuccino', 'Espresso with foamed milk', 5.00, TRUE, FALSE, 3),\n\n \n  ('a4444444-4444-4444-4444-444444444444', '11111111-1111-1111-1111-111111111111', NULL, 'e5555555-5555-5555-5555-555555555555', 'Drip Coffee', 'Fresh brewed daily', 3.50, TRUE, FALSE, 1),\n  ('a5555555-5555-5555-5555-555555555555', '11111111-1111-1111-1111-111111111111', NULL, 'e5555555-5555-5555-5555-555555555555', 'Cold Brew', 'Smooth cold brew coffee', 5.50, TRUE, FALSE, 2),\n\n \n  ('a6666666-6666-6666-6666-666666666666', '11111111-1111-1111-1111-111111111111', NULL, 'e3333333-3333-3333-3333-333333333333', 'Chocolate Cake', 'Rich chocolate layer cake', 6.00, TRUE, TRUE, 1),\n  ('a7777777-7777-7777-7777-777777777777', '11111111-1111-1111-1111-111111111111', NULL, 'e3333333-3333-3333-3333-333333333333', 'Croissant', 'Buttery French croissant', 3.50, TRUE, TRUE, 2);\n\n-- ============================================================================\n-- MENU ITEMS (Burger House)\n-- ============================================================================\n\nINSERT INTO menu_items (id, brand_id, store_id, category_id, name, description, price, available, inventory_tracked, display_order) VALUES\n \n  ('b1111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', NULL, 'f1111111-1111-1111-1111-111111111111', 'Classic Burger', '100% beef patty with lettuce, tomato, onion', 9.99, TRUE, FALSE, 1),\n  ('b2222222-2222-2222-2222-222222222222', '22222222-2222-2222-2222-222222222222', NULL, 'f1111111-1111-1111-1111-111111111111', 'Cheese Burger', 'Classic burger with cheddar cheese', 10.99, TRUE, FALSE, 2),\n  ('b3333333-3333-3333-3333-333333333333', '22222222-2222-2222-2222-222222222222', NULL, 'f1111111-1111-1111-1111-111111111111', 'Bacon Burger', 'Topped with crispy bacon', 11.99, TRUE, FALSE, 3),\n\n \n  ('b4444444-4444-4444-4444-444444444444', '22222222-2222-2222-2222-222222222222', NULL, 'f2222222-2222-2222-2222-222222222222', 'French Fries', 'Crispy golden fries', 3.99, TRUE, FALSE, 1),\n  ('b5555555-5555-5555-5555-555555555555', '22222222-2222-2222-2222-222222222222', NULL, 'f2222222-2222-2222-2222-222222222222', 'Onion Rings', 'Beer-battered onion rings', 4.99, TRUE, FALSE, 2);\n\n-- ============================================================================\n-- MENU MODIFIERS\n-- ============================================================================\n\n-- Coffee size modifier\nINSERT INTO menu_modifiers (item_id, name, type, required, min_selections, max_selections, options, display_order) VALUES\n  ('a1111111-1111-1111-1111-111111111111', 'Size', 'single', TRUE, 1, 1,\n   '[{\"name\": \"Tall (12oz)\", \"price\": 0}, {\"name\": \"Grande (16oz)\", \"price\": 0.50}, {\"name\": \"Venti (20oz)\", \"price\": 1.00}]'::jsonb, 1),\n  ('a2222222-2222-2222-2222-222222222222', 'Size', 'single', TRUE, 1, 1,\n   '[{\"name\": \"Tall (12oz)\", \"price\": 0}, {\"name\": \"Grande (16oz)\", \"price\": 0.50}, {\"name\": \"Venti (20oz)\", \"price\": 1.00}]'::jsonb, 1);\n\n-- Coffee extras\nINSERT INTO menu_modifiers (item_id, name, type, required, min_selections, max_selections, options, display_order) VALUES\n  ('a2222222-2222-2222-2222-222222222222', 'Extras', 'multiple', FALSE, 0, 3,\n   '[{\"name\": \"Extra Shot\", \"price\": 0.75}, {\"name\": \"Whipped Cream\", \"price\": 0.50}, {\"name\": \"Caramel Drizzle\", \"price\": 0.50}]'::jsonb, 2);\n\n-- Burger extras\nINSERT INTO menu_modifiers (item_id, name, type, required, min_selections, max_selections, options, display_order) VALUES\n  ('b1111111-1111-1111-1111-111111111111', 'Add-ons', 'multiple', FALSE, 0, 5,\n   '[{\"name\": \"Extra Cheese\", \"price\": 1.00}, {\"name\": \"Bacon\", \"price\": 1.50}, {\"name\": \"Avocado\", \"price\": 1.50}, {\"name\": \"Egg\", \"price\": 1.00}]'::jsonb, 1);\n\n-- ============================================================================\n-- INVENTORY\n-- ============================================================================\n\nINSERT INTO inventory (store_id, item_id, quantity, low_stock_threshold) VALUES\n \n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'a6666666-6666-6666-6666-666666666666', 10, 3),\n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'a7777777-7777-7777-7777-777777777777', 15, 5),\n\n \n  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'a6666666-6666-6666-6666-666666666666', 8, 3),\n  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'a7777777-7777-7777-7777-777777777777', 12, 5);\n\n-- ============================================================================\n-- PICKUP SLOTS\n-- ============================================================================\n\n-- Coffee & Co stores (every day, 30 min slots, 20 min lead time, 5 orders per slot)\nINSERT INTO pickup_slots (store_id, day_of_week, slot_duration_minutes, lead_time_minutes, capacity_per_slot) VALUES\n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 0, 30, 20, 5),\n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 1, 30, 20, 5),\n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 2, 30, 20, 5),\n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 3, 30, 20, 5),\n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 4, 30, 20, 5),\n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 5, 30, 20, 5),\n  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 6, 30, 20, 5),\n\n  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 0, 30, 20, 5),\n  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 1, 30, 20, 5),\n  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 2, 30, 20, 5),\n  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 3, 30, 20, 5),\n  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 4, 30, 20, 5),\n  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 5, 30, 20, 5),\n  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 6, 30, 20, 5);\n\n-- Burger House (15 min slots, 15 min lead time, 8 orders per slot)\nINSERT INTO pickup_slots (store_id, day_of_week, slot_duration_minutes, lead_time_minutes, capacity_per_slot) VALUES\n  ('cccccccc-cccc-cccc-cccc-cccccccccccc', 0, 15, 15, 8),\n  ('cccccccc-cccc-cccc-cccc-cccccccccccc', 1, 15, 15, 8),\n  ('cccccccc-cccc-cccc-cccc-cccccccccccc', 2, 15, 15, 8),\n  ('cccccccc-cccc-cccc-cccc-cccccccccccc', 3, 15, 15, 8),\n  ('cccccccc-cccc-cccc-cccc-cccccccccccc', 4, 15, 15, 8),\n  ('cccccccc-cccc-cccc-cccc-cccccccccccc', 5, 15, 15, 8),\n  ('cccccccc-cccc-cccc-cccc-cccccccccccc', 6, 15, 15, 8);\n\n-- ============================================================================\n-- APP CONFIGS\n-- ============================================================================\n\nINSERT INTO app_configs (brand_id, app_name, primary_color, feature_toggles, build_version) VALUES\n  ('11111111-1111-1111-1111-111111111111', 'Coffee & Co', '#8B4513',\n   '{\"loyalty\": true, \"promotions\": true, \"multi_language\": true}'::jsonb, '1.0.0'),\n\n  ('22222222-2222-2222-2222-222222222222', 'Burger House', '#DC2626',\n   '{\"loyalty\": true, \"promotions\": true, \"multi_language\": false}'::jsonb, '1.0.0');\n\n-- ============================================================================\n-- PROMOTIONS\n-- ============================================================================\n\nINSERT INTO promotions (brand_id, store_ids, name, description, type, discount_value, conditions, valid_from, valid_to, active) VALUES\n  ('11111111-1111-1111-1111-111111111111', '{}', 'Happy Hour', '20% off all drinks 2-4pm', 'percentage_discount', 20,\n   '{\"time_range\": {\"start\": \"14:00\", \"end\": \"16:00\"}}'::jsonb,\n   NOW() - INTERVAL '1 day', NOW() + INTERVAL '30 days', TRUE),\n\n  ('22222222-2222-2222-2222-222222222222', '{}', 'Free Fries Friday', 'Free fries with any burger on Fridays', 'buy_x_get_y', 0,\n   '{\"day_of_week\": 5, \"buy_items\": [\"burger\"], \"get_items\": [\"fries\"]}'::jsonb,\n   NOW() - INTERVAL '1 day', NOW() + INTERVAL '90 days', TRUE);\n\n-- ============================================================================\n-- COUPONS\n-- ============================================================================\n\nINSERT INTO coupons (brand_id, customer_id, code, type, value, min_order_value, expires_at) VALUES\n  ('11111111-1111-1111-1111-111111111111', 'd1111111-1111-1111-1111-111111111111', 'WELCOME10', 'percentage', 10, 10.00, NOW() + INTERVAL '30 days'),\n  ('11111111-1111-1111-1111-111111111111', 'd2222222-2222-2222-2222-222222222222', 'COFFEE5', 'fixed_amount', 5, 15.00, NOW() + INTERVAL '30 days'),\n  ('22222222-2222-2222-2222-222222222222', NULL, 'BURGER2024', 'fixed_amount', 3, 20.00, NOW() + INTERVAL '60 days');\n\n-- ============================================================================\n-- SAMPLE ORDERS (for testing)\n-- ============================================================================\n\nINSERT INTO orders (\n  id, brand_id, store_id, customer_id, items, subtotal, tax, total,\n  pickup_window_start, pickup_window_end, status, payment_method, payment_status,\n  customer_name, customer_phone\n) VALUES\n \n  ('c1111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111',\n   'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'd1111111-1111-1111-1111-111111111111',\n   '[{\"item_id\": \"a2222222-2222-2222-2222-222222222222\", \"name\": \"Latte\", \"quantity\": 2, \"price\": 5.00, \"modifiers\": [{\"name\": \"Size\", \"option\": \"Grande (16oz)\", \"price\": 0.50}]}]'::jsonb,\n   11.00, 1.10, 12.10,\n   NOW() - INTERVAL '2 hours', NOW() - INTERVAL '1 hour 30 minutes',\n   'completed', 'toss', 'captured',\n   '김철수', '+821012345678'),\n\n \n  ('c2222222-2222-2222-2222-222222222222', '22222222-2222-2222-2222-222222222222',\n   'cccccccc-cccc-cccc-cccc-cccccccccccc', 'd2222222-2222-2222-2222-222222222222',\n   '[{\"item_id\": \"b1111111-1111-1111-1111-111111111111\", \"name\": \"Classic Burger\", \"quantity\": 1, \"price\": 9.99}, {\"item_id\": \"b4444444-4444-4444-4444-444444444444\", \"name\": \"French Fries\", \"quantity\": 1, \"price\": 3.99}]'::jsonb,\n   13.98, 1.40, 15.38,\n   NOW() + INTERVAL '30 minutes', NOW() + INTERVAL '1 hour',\n   'waiting', 'kakaopay', 'captured',\n   '이영희', '+821098765432');\n\n-- ============================================================================\n-- SUMMARY\n-- ============================================================================\n\n-- Display summary\nDO $$\nBEGIN\n  RAISE NOTICE '✅ Seed data created successfully!';\n  RAISE NOTICE '';\n  RAISE NOTICE 'Summary:';\n  RAISE NOTICE '  - Brands: %', (SELECT COUNT(*) FROM brands);\n  RAISE NOTICE '  - Stores: %', (SELECT COUNT(*) FROM stores);\n  RAISE NOTICE '  - Staff: %', (SELECT COUNT(*) FROM staff);\n  RAISE NOTICE '  - Customers: %', (SELECT COUNT(*) FROM customers);\n  RAISE NOTICE '  - Menu Categories: %', (SELECT COUNT(*) FROM menu_categories);\n  RAISE NOTICE '  - Menu Items: %', (SELECT COUNT(*) FROM menu_items);\n  RAISE NOTICE '  - Menu Modifiers: %', (SELECT COUNT(*) FROM menu_modifiers);\n  RAISE NOTICE '  - Inventory: %', (SELECT COUNT(*) FROM inventory);\n  RAISE NOTICE '  - Pickup Slots: %', (SELECT COUNT(*) FROM pickup_slots);\n  RAISE NOTICE '  - App Configs: %', (SELECT COUNT(*) FROM app_configs);\n  RAISE NOTICE '  - Promotions: %', (SELECT COUNT(*) FROM promotions);\n  RAISE NOTICE '  - Coupons: %', (SELECT COUNT(*) FROM coupons);\n  RAISE NOTICE '  - Orders: %', (SELECT COUNT(*) FROM orders);\n  RAISE NOTICE '';\n  RAISE NOTICE '⚠️  Note: Staff and Customer user_ids are NULL.';\n  RAISE NOTICE '   Create actual users via Supabase Auth and update these records later.';\nEND $$;\n"
